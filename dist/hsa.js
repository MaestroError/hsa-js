!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports["hsa-js"]=e():t["hsa-js"]=e()}(this,(()=>(()=>{"use strict";var t={d:(e,n)=>{for(var i in n)t.o(n,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:n[i]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function i(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==n(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,"string");if("object"!==n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===n(o)?o:String(o)),r)}var o}t.r(e),t.d(e,{default:()=>c});const r=function(){function t(e,n,i){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.prefix=e,this.suffix=n,this.content=i,this.debug=r}var e,n;return e=t,(n=[{key:"replace",value:function(t){var e=t.originalString,n=t.originalString,i=t.found.trim();if("hashtag"===t.type&&(e=e.replace("#",""),i=i.replace("#","").trim()),0==i.length)return!1;var r=e.indexOf(i);if(r>-1){var o=(e=e.substring(0,r)+this.prefix+e.substring(r)).indexOf(i)+i.length;return e=e.substring(0,o)+this.suffix+e.substring(o),this.content=this.content.split(n).join(e),this.debug&&console.log("Replaced: ",t),!0}return this.debug&&console.log("Not replaced: ",t),!1}},{key:"getContent",value:function(){return this.content}}])&&i(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function a(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function u(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(void 0,r=function(t,e){if("object"!==o(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,"string");if("object"!==o(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(i.key),"symbol"===o(r)?r:String(r)),i)}var r}const c=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.prefix=e.prefix||"{{ __('",this.suffix=e.suffix||"') }}",this.ignoreChars=e.ignore||["#","_",">","^","*","="],this.warningChars=e.warnings||["%","{","(","}",")","$","'"],this.extractions=e.extractions||["text","placeholder","alt","title","hashtag"],this.content=n||"",this.originalContent=n||"",this.extPrefix="",this.extSuffix="",this.searchRegex="",this.foundStrings={data:[]},this.warnings=[],this.countReplaced=0,this.countFound=0,this.countNotReplaced=0,this.debug=e.debug||!1}var e,n;return e=t,n=[{key:"extractText",value:function(){this.extPrefix="\\>",this.extSuffix="\\<\\/[A-Za-z0-9]{0,10}\\>",this.generateRegex();var t="text";this.setRegexFlags(t),this.parseContent(t)}},{key:"extractTextOO",value:function(){this.extPrefix="(\\<[^\\/](.{0,10})\\>)",this.extSuffix="(\\<[^\\/](.{0,10})\\>)",this.generateRegex();var t="text";this.setRegexFlags(t),this.parseContent(t)}},{key:"extractTextCC",value:function(){this.extPrefix="(\\<\\/[A-Za-z0-9]{0,10}\\>)",this.extSuffix="(\\<\\/[A-Za-z0-9]{0,10}\\>)",this.generateRegex();var t="text";this.setRegexFlags(t),this.parseContent(t)}},{key:"extractTextCO",value:function(){this.extPrefix="(\\<\\/[A-Za-z0-9]{0,10}\\>)",this.extSuffix="(\\<[^\\/](.{0,10})\\>)",this.generateRegex();var t="text";this.setRegexFlags(t),this.parseContent(t)}},{key:"extractPlaceholder",value:function(){this.extPrefix="placeholder\\s*=\\s*(\"|')",this.extSuffix="(\\\"|')\\s*(\\/|>)",this.generateRegex();var t="placeholder";this.setRegexFlags(t),this.parseContent(t)}},{key:"extractAlt",value:function(){this.extPrefix="alt=(\\\"|')",this.extSuffix="(\\\"|')(\\s|/|>)",this.generateRegex(),this.setRegexFlags("alt"),this.parseContent("alt")}},{key:"extractTitle",value:function(){this.extPrefix="title=(\"|')",this.extSuffix="(\"|')(s|/|>)",this.generateRegex();var t="title";this.setRegexFlags(t),this.parseContent(t)}},{key:"extractHashtag",value:function(){this.extPrefix='(?<=[">\\s])#',this.extSuffix="(?=[\"'<\\/])",this.generateRegex();var t="hashtag";this.setRegexFlags(t),this.parseContent(t)}},{key:"generateRegex",value:function(){if(this.extPrefix&&this.extSuffix){var t=this.ignoreChars.join("\\");this.extPrefix.includes("#")?this.searchRegex="".concat(this.extPrefix,"(.*?)").concat(this.extSuffix):this.searchRegex="".concat(this.extPrefix,"([^").concat(t,"]+)").concat(this.extSuffix)}}},{key:"parseContent",value:function(t){this.setRegexFlags(t);for(var e,n=new RegExp(this.searchRegex,this.regexFlags);null!==(e=n.exec(this.content));){var i=e[0],r=this.removeParsePrefix(i);if(r=this.removeParseSuffix(r),!this.checkDuplicate(r,t)){var o=this.findLineOfString(i);this.addNewString(r,i,t,o.join(", "))}}}},{key:"removeParsePrefix",value:function(t){if(this.extPrefix.includes("#"))return t;var e=new RegExp(this.extPrefix,this.regexFlags),n=t.match(e)||[];return 0===n.length?t:this.removeFirstOccurrence(t,n[0])}},{key:"removeParseSuffix",value:function(t){if(this.extPrefix.includes("#"))return t;var e=new RegExp(this.extSuffix,this.regexFlags),n=t.match(e)||[];if(0===n.length)return t;var i=n[n.length-1];return this.removeLastOccurrence(t,i)}},{key:"removeFirstOccurrence",value:function(t,e){return t.replace(e,"")}},{key:"removeLastOccurrence",value:function(t,e){var n=t.lastIndexOf(e);return-1!==n?t.slice(0,n)+t.slice(n+e.length):t}},{key:"checkDuplicate",value:function(t,e){var n=!1;if(this.foundStrings.data){var i,r=a(this.foundStrings.data);try{for(r.s();!(i=r.n()).done;){var o=i.value;if(o.found===t&&o.type===e){n=!0;break}}}catch(t){r.e(t)}finally{r.f()}}return n}},{key:"addNewString",value:function(t,e,n,i){var r={found:t,originalString:e,type:n,lines:i};this.foundStrings.data.push(r)}},{key:"findLineOfString",value:function(t){var e=this.content.split("\n"),n=[];return e.forEach((function(e,i){e.includes(t)&&n.push(i+1)})),n.map(String)}},{key:"checkWarningCharacters",value:function(t){var e=[];return this.warningChars.forEach((function(n){t.found.includes(n)&&e.push(n)})),e}},{key:"setRegexFlags",value:function(t){this.regexFlags=["placeholder","alt","title"].includes(t)?"gi":"g"}},{key:"affixIt",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.content=t,this.originalContent=t,this.content&&(this.extractions.includes("text")&&(this.extractText(),this.extractTextOO(),this.extractTextCC(),this.extractTextCO()),this.extractions.includes("placeholder")&&this.extractPlaceholder(),this.extractions.includes("alt")&&this.extractAlt(),this.extractions.includes("title")&&this.extractTitle(),this.extractions.includes("hashtag")&&this.extractHashtag());var n=this.replace();return this.content=n.content,e?(this.report(),n):(this.warnings=[],this.content)}},{key:"replace",value:function(){var t=this,e=0,n=0,i=new r(this.prefix,this.suffix,this.content,this.debug);return this.foundStrings.data.forEach((function(r){var o=!0;if("placeholder"==r.found.toLowerCase()){var a="warning: 'placeholder' in placeholder attribute not allowed -> "+r.found+" on line: "+r.lines;t.warnings.push(a),o=!1}var s=t.checkWarningCharacters(r);s.length>0&&(t.warnings.push("Warning! Found "+s.toString()+" characters: "+r.found+" on line: "+r.lines),o=!1),o&&(i.replace(r)?e++:n++)})),this.countReplaced=e,this.countFound=this.foundStrings.data.length,this.countNotReplaced=n,{content:i.getContent(),report:this.reportData()}}},{key:"report",value:function(){this.countFound&&(console.log("Found strings amount: "+this.countFound),this.debug&&console.log(this.foundStrings)),this.countReplaced&&console.log("Replaced strings amount: "+this.countReplaced),this.countNotReplaced&&console.log("Skipped (not replaced and/or empty) strings amount: "+this.countNotReplaced),this.warnings.length?(console.log("Strings with warning characters: "+this.warnings.length),this.warnings.forEach((function(t,e){console.warn(e+1+". "+t)}))):console.log("No warning characters found!"),this.warnings=[]}},{key:"reportData",value:function(){return{found:this.countFound,replaced:this.countReplaced,skipped:this.countNotReplaced,warnings_amount:this.warnings.length,warnings:this.warnings}}},{key:"shouldWarn",value:function(t){var e,n=a(this.warningChars);try{for(n.s();!(e=n.n()).done;){var i=e.value;if(t.includes(i))return!0}}catch(t){n.e(t)}finally{n.f()}return!1}}],n&&u(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();return e})()));